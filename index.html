<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Rezept Zufallsgenerator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #4CAF50;
        }

        .box {
            background-color: white;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
        }

        input, select, button {
            width: 100%;
            padding: 8px;
            margin-top: 8px;
        }

        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        #result {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            text-align: center;
            margin-top: 10px;
        }

        .recipe-list {
            margin-top: 10px;
            padding-left: 20px;
        }

        .recipe-list li {
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .delete-btn {
            background-color: #f44336; /* Rot */
            border: none;
            color: white;
            padding: 2px 6px;
            font-size: 12px;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 5px;
            height: 22px;
            line-height: 18px;
            width: 500px;
        }

        .delete-btn:hover {
            background-color: #d32f2f;
        }
    </style>
</head>
<body>

<h1>üçΩ Rezept Zufallsgenerator</h1>

<div class="box">
    <h2>‚ûï Rezept hinzuf√ºgen</h2>
    <input type="text" id="recipeInput" placeholder="Rezeptname eingeben">
    <input type="text" id="ingredientsInput" placeholder="Optionale Zutaten (Komma getrennt)">
    
    <select id="category">
        <option value="warm">Warme Gerichte</option>
        <option value="snack">Snacks</option>
        <option value="outdoor">Drau√üen Gerichte</option>
    </select>

    <button onclick="addRecipe()">Rezept hinzuf√ºgen</button>

    <h3>üìã Hinzugef√ºgte Rezepte:</h3>
    <ul id="warmList" class="recipe-list"></ul>
    <ul id="snackList" class="recipe-list"></ul>
    <ul id="outdoorList" class="recipe-list"></ul>
</div>

<div class="box">
    <h2>üé≤ Zuf√§lliges Rezept ausw√§hlen</h2>
    
    <select id="randomCategory">
        <option value="warm">Warme Gerichte</option>
        <option value="snack">Snacks</option>
        <option value="outdoor">Drau√üen Gerichte</option>
    </select>

    <button onclick="randomRecipe()">Zuf√§lliges Rezept</button>

    <div id="result"></div>
</div>

<script>
    // Rezepte aus LocalStorage laden oder leere Arrays erstellen
    const recipes = JSON.parse(localStorage.getItem('recipes')) || {
        warm: [],
        snack: [],
        outdoor: []
    };

    function addRecipe() {
        const recipeName = document.getElementById("recipeInput").value.trim();
        const ingredients = document.getElementById("ingredientsInput").value.trim();
        const category = document.getElementById("category").value;

        if (!recipeName) {
            alert("Bitte einen Rezeptnamen eingeben!");
            return;
        }

        // Rezept als Objekt speichern
        const recipe = {
            name: recipeName,
            ingredients: ingredients ? ingredients.split(',').map(i => i.trim()) : []
        };

        recipes[category].push(recipe);
        document.getElementById("recipeInput").value = "";
        document.getElementById("ingredientsInput").value = "";

        saveRecipes();
        updateRecipeList();
    }

    function randomRecipe() {
        const category = document.getElementById("randomCategory").value;
        const list = recipes[category];

        if (list.length === 0) {
            document.getElementById("result").innerText =
                "Keine Rezepte in dieser Kategorie!";
            return;
        }

        const randomIndex = Math.floor(Math.random() * list.length);
        const selected = list[randomIndex];
        const ingredientsText = selected.ingredients.length > 0 ? ` (Zutaten: ${selected.ingredients.join(', ')})` : '';
        document.getElementById("result").innerText =
            "üçΩ " + selected.name + ingredientsText;
    }

    function deleteRecipe(category, index) {
        recipes[category].splice(index, 1);
        saveRecipes();
        updateRecipeList();
    }

    function updateRecipeList() {
        function renderList(list) {
            return list.map((r, i) => {
                const ingredientsText = r.ingredients.length > 0 ? ` (Zutaten: ${r.ingredients.join(', ')})` : '';
                return `<li>${r.name}${ingredientsText} <button class="delete-btn" onclick="deleteRecipe('${categoryName}', ${i})">L√∂schen</button></li>`;
            }).join('');
        }

        let categoryName = 'warm';
        document.getElementById("warmList").innerHTML = recipes.warm
            .map((r, i) => {
                const ingredientsText = r.ingredients.length > 0 ? ` (Zutaten: ${r.ingredients.join(', ')})` : '';
                return `<li>${r.name}${ingredientsText} <button class="delete-btn" onclick="deleteRecipe('warm', ${i})">L√∂schen</button></li>`;
            }).join('');
        document.getElementById("snackList").innerHTML = recipes.snack
            .map((r, i) => {
                const ingredientsText = r.ingredients.length > 0 ? ` (Zutaten: ${r.ingredients.join(', ')})` : '';
                return `<li>${r.name}${ingredientsText} <button class="delete-btn" onclick="deleteRecipe('snack', ${i})">L√∂schen</button></li>`;
            }).join('');
        document.getElementById("outdoorList").innerHTML = recipes.outdoor
            .map((r, i) => {
                const ingredientsText = r.ingredients.length > 0 ? ` (Zutaten: ${r.ingredients.join(', ')})` : '';
                return `<li>${r.name}${ingredientsText} <button class="delete-btn" onclick="deleteRecipe('outdoor', ${i})">L√∂schen</button></li>`;
            }).join('');
    }

    function saveRecipes() {
        localStorage.setItem('recipes', JSON.stringify(recipes));
    }

    // Beim Laden die Liste anzeigen
    updateRecipeList();
</script>

</body>
</html>
